# Week 1 MVP 主链路测试用例

## 范围
- 主链路：打卡 -> 趋势 -> 漂移提醒 -> QA 报告结论
- 覆盖层次：API、UI、E2E

## API 用例

### API-01 正向：成功创建打卡
- 前置：用户 `u1` 存在；当天未打卡。
- 步骤：POST `/api/checkins`，提交 `energy/stress/social=1..5` 与 `key_contact`。
- 期望结果：HTTP 201；返回 checkin 对象；数据库新增一条当天记录。

### API-02 边界：评分下界/上界
- 前置：用户 `u1` 存在；目标日期无重复数据。
- 步骤：分别提交评分值 `1` 与 `5`。
- 期望结果：HTTP 201；两组请求均成功。

### API-03 异常：评分越界
- 前置：用户 `u1` 存在。
- 步骤：提交 `energy=0` 或 `stress=6`。
- 期望结果：HTTP 400；错误码 `VALIDATION_ERROR`；无新数据写入。

### API-04 异常：重复打卡
- 前置：用户 `u1` 当天已有一条打卡。
- 步骤：再次 POST 相同日期。
- 期望结果：HTTP 409；错误码 `DUPLICATE_CHECKIN`。

### API-05 回归：错误结构稳定
- 前置：构造一次校验失败请求。
- 步骤：检查返回 JSON 结构。
- 期望结果：包含 `error.code` 与 `error.message`；不泄露内部堆栈信息。

## UI 用例

### UI-01 正向：表单可见并可提交
- 前置：打开 `/checkin` 页面。
- 步骤：输入合法值后点击提交。
- 期望结果：提交按钮进入禁用态；成功后显示成功提示。

### UI-02 边界：必填评分项校验
- 前置：打开 `/checkin` 页面。
- 步骤：空值提交；再分别输入 1 和 5。
- 期望结果：空值时提示错误；1 和 5 可通过校验。

### UI-03 异常：服务端返回错误
- 前置：Mock API 返回 409。
- 步骤：提交合法表单。
- 期望结果：页面展示后端错误信息；表单保持可继续编辑。

### UI-04 回归：Key Contact 字段透传
- 前置：打开 `/checkin` 页面。
- 步骤：填写 `key_contact` 后提交。
- 期望结果：请求体包含 `key_contact`。

## E2E 入口用例

### E2E-01 主链路冒烟
- 前置：应用启动；测试账号可用。
- 步骤：完成打卡 -> 进入趋势页 -> 进入提醒页。
- 期望结果：三页可访问；关键 UI 节点存在；流程无崩溃。

### E2E-02 回归：重复打卡提示
- 前置：同账号当天已打卡一次。
- 步骤：再次提交打卡。
- 期望结果：页面提示重复打卡；流程不中断。
